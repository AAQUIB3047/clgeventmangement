#!/bin/bash
# Pre-commit hook to run linters and formatters

echo "ðŸ” Running pre-commit checks..."

# Frontend checks
if [ -d "college_event_management/frontend" ]; then
    echo "ðŸ“ Frontend: Checking ESLint..."
    cd college_event_management/frontend
    npm run lint:fix
    if [ $? -ne 0 ]; then
        echo "âŒ ESLint failed"
        exit 1
    fi
    
    echo "âœ¨ Frontend: Formatting with Prettier..."
    npm run format
    cd ../..
fi

# Backend checks
if [ -d "college_event_management/backend" ]; then
    echo "ðŸ Backend: Running Black..."
    cd college_event_management/backend
    black . 2>/dev/null
    
    echo "ðŸ Backend: Checking with Ruff..."
    ruff check . --fix 2>/dev/null
    cd ../..
fi

echo "âœ… Pre-commit checks passed!"
exit 0
